=== RUN   TestEncodeBlockAnnounce
=== PAUSE TestEncodeBlockAnnounce
=== RUN   TestDecodeBlockAnnounce
=== PAUSE TestDecodeBlockAnnounce
=== RUN   TestEncodeBlockAnnounceHandshake
=== PAUSE TestEncodeBlockAnnounceHandshake
=== RUN   TestDecodeBlockAnnounceHandshake
=== PAUSE TestDecodeBlockAnnounceHandshake
=== RUN   TestHandleBlockAnnounceMessage
=== PAUSE TestHandleBlockAnnounceMessage
=== RUN   TestValidateBlockAnnounceHandshake
=== PAUSE TestValidateBlockAnnounceHandshake
=== RUN   TestBuildIdentity
=== PAUSE TestBuildIdentity
=== RUN   TestBuild
=== PAUSE TestBuild
=== RUN   TestMinPeers
=== PAUSE TestMinPeers
=== RUN   TestMaxPeers
=== PAUSE TestMaxPeers
=== RUN   TestProtectUnprotectPeer
=== PAUSE TestProtectUnprotectPeer
=== RUN   TestPersistentPeers
=== PAUSE TestPersistentPeers
=== RUN   TestRemovePeer
=== PAUSE TestRemovePeer
=== RUN   TestSetReservedPeer
=== PAUSE TestSetReservedPeer
=== RUN   TestKadDHT
=== PAUSE TestKadDHT
=== RUN   TestBeginDiscovery
=== PAUSE TestBeginDiscovery
=== RUN   TestBeginDiscovery_ThreeNodes
=== PAUSE TestBeginDiscovery_ThreeNodes
=== RUN   TestGossip
=== PAUSE TestGossip
=== RUN   TestExternalAddrs
=== PAUSE TestExternalAddrs
=== RUN   TestExternalAddrsPublicIP
=== PAUSE TestExternalAddrsPublicIP
=== RUN   TestConnect
=== PAUSE TestConnect
=== RUN   TestBootstrap
=== PAUSE TestBootstrap
=== RUN   TestSend
=== PAUSE TestSend
=== RUN   TestExistingStream
=== PAUSE TestExistingStream
=== RUN   TestStreamCloseMetadataCleanup
=== PAUSE TestStreamCloseMetadataCleanup
=== RUN   Test_PeerSupportsProtocol
=== PAUSE Test_PeerSupportsProtocol
=== RUN   Test_AddReservedPeers
=== PAUSE Test_AddReservedPeers
=== RUN   Test_RemoveReservedPeers
=== PAUSE Test_RemoveReservedPeers
=== RUN   TestStreamCloseEOF
=== PAUSE TestStreamCloseEOF
=== RUN   TestPeerConnect
=== PAUSE TestPeerConnect
=== RUN   TestBannedPeer
=== PAUSE TestBannedPeer
=== RUN   TestPeerReputation
=== PAUSE TestPeerReputation
=== RUN   TestEncodeLightRequest
=== PAUSE TestEncodeLightRequest
=== RUN   TestEncodeLightResponse
=== PAUSE TestEncodeLightResponse
=== RUN   TestDecodeLightMessage
=== PAUSE TestDecodeLightMessage
=== RUN   TestHandleLightMessage_Response
=== PAUSE TestHandleLightMessage_Response
=== RUN   TestMDNS
=== PAUSE TestMDNS
=== RUN   TestMessageCache
=== PAUSE TestMessageCache
=== RUN   TestMessageCacheError
=== PAUSE TestMessageCacheError
=== RUN   TestEncodeBlockRequestMessage
=== PAUSE TestEncodeBlockRequestMessage
=== RUN   TestEncodeBlockRequestMessage_BlockHash
=== PAUSE TestEncodeBlockRequestMessage_BlockHash
=== RUN   TestEncodeBlockRequestMessage_BlockNumber
=== PAUSE TestEncodeBlockRequestMessage_BlockNumber
=== RUN   TestBlockRequestString
=== PAUSE TestBlockRequestString
=== RUN   TestEncodeBlockRequestMessage_NoOptionals
=== PAUSE TestEncodeBlockRequestMessage_NoOptionals
=== RUN   TestEncodeBlockResponseMessage_Empty
=== PAUSE TestEncodeBlockResponseMessage_Empty
=== RUN   TestEncodeBlockResponseMessage_WithBody
=== PAUSE TestEncodeBlockResponseMessage_WithBody
=== RUN   TestEncodeBlockResponseMessage_WithAll
=== PAUSE TestEncodeBlockResponseMessage_WithAll
=== RUN   TestEncodeBlockAnnounceMessage
=== PAUSE TestEncodeBlockAnnounceMessage
=== RUN   TestDecode_BlockAnnounceMessage
=== PAUSE TestDecode_BlockAnnounceMessage
=== RUN   TestEncodeTransactionMessageSingleExtrinsic
=== PAUSE TestEncodeTransactionMessageSingleExtrinsic
=== RUN   TestEncodeTransactionMessageTwoExtrinsics
=== PAUSE TestEncodeTransactionMessageTwoExtrinsics
=== RUN   TestDecodeTransactionMessageOneExtrinsic
=== PAUSE TestDecodeTransactionMessageOneExtrinsic
=== RUN   TestDecodeTransactionMessageTwoExtrinsics
=== PAUSE TestDecodeTransactionMessageTwoExtrinsics
=== RUN   TestDecodeConsensusMessage
=== PAUSE TestDecodeConsensusMessage
=== RUN   TestCreateDecoder_BlockAnnounce
=== PAUSE TestCreateDecoder_BlockAnnounce
=== RUN   TestCreateNotificationsMessageHandler_BlockAnnounce
=== PAUSE TestCreateNotificationsMessageHandler_BlockAnnounce
=== RUN   TestCreateNotificationsMessageHandler_BlockAnnounceHandshake
=== PAUSE TestCreateNotificationsMessageHandler_BlockAnnounceHandshake
=== RUN   Test_HandshakeTimeout
=== PAUSE Test_HandshakeTimeout
=== RUN   TestCreateNotificationsMessageHandler_HandleTransaction
=== PAUSE TestCreateNotificationsMessageHandler_HandleTransaction
=== RUN   TestBlockAnnounceHandshakeSize
=== PAUSE TestBlockAnnounceHandshakeSize
=== RUN   Test_sizedBufferPool
=== PAUSE Test_sizedBufferPool
=== RUN   Test_sizedBufferPool_race
=== PAUSE Test_sizedBufferPool_race
=== RUN   TestStartService
=== PAUSE TestStartService
=== RUN   TestBroadcastMessages
=== PAUSE TestBroadcastMessages
=== RUN   TestBroadcastDuplicateMessage
=== PAUSE TestBroadcastDuplicateMessage
=== RUN   TestService_NodeRoles
=== PAUSE TestService_NodeRoles
=== RUN   TestService_Health
=== PAUSE TestService_Health
=== RUN   TestPersistPeerStore
=== PAUSE TestPersistPeerStore
=== RUN   TestHandleConn
=== PAUSE TestHandleConn
=== RUN   TestSerivceIsMajorSyncMetrics
=== PAUSE TestSerivceIsMajorSyncMetrics
=== RUN   TestStreamManager
=== PAUSE TestStreamManager
=== RUN   TestStreamManager_KeepStream
    stream_manager_test.go:91: 
--- SKIP: TestStreamManager_KeepStream (0.00s)
=== RUN   TestDecodeSyncMessage
=== PAUSE TestDecodeSyncMessage
=== RUN   TestDecodeTransactionHandshake
=== PAUSE TestDecodeTransactionHandshake
=== RUN   TestHandleTransactionMessage
=== PAUSE TestHandleTransactionMessage
=== RUN   TestStringToAddrInfo
--- PASS: TestStringToAddrInfo (0.00s)
=== RUN   TestStringsToAddrInfos
--- PASS: TestStringsToAddrInfos (0.00s)
=== RUN   TestGenerateKey
--- PASS: TestGenerateKey (0.01s)
=== RUN   TestReadLEB128ToUint64
--- PASS: TestReadLEB128ToUint64 (0.00s)
=== RUN   TestInvalidLeb128
--- PASS: TestInvalidLeb128 (0.00s)
=== CONT  TestEncodeBlockAnnounce
=== CONT  TestMDNS
=== CONT  TestCreateNotificationsMessageHandler_BlockAnnounce
=== CONT  TestService_NodeRoles
=== CONT  TestStartService
=== CONT  TestEncodeBlockResponseMessage_WithAll
=== CONT  TestExternalAddrs
=== CONT  Test_sizedBufferPool_race
--- PASS: Test_sizedBufferPool_race (0.00s)
=== CONT  TestMessageCache
--- PASS: TestEncodeBlockAnnounce (0.00s)
=== CONT  TestHandleLightMessage_Response
--- PASS: TestEncodeBlockResponseMessage_WithAll (0.01s)
=== CONT  TestEncodeLightResponse
=== CONT  TestDecodeLightMessage
--- PASS: TestEncodeLightResponse (0.00s)
--- PASS: TestDecodeLightMessage (0.00s)
=== CONT  TestPeerReputation
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestService_NodeRoles3902347190/001/TestService_NodeRoles/node/node.key	pkg=network
2021-12-07T15:11:41-04:00 WARN Bootstrap is enabled but no bootstrap nodes are defined	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleLightMessage_Response260855760/001/TestHandleLightMessage_Response/nodeA/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_BlockAnnounce955633044/001/TestCreateNotificationsMessageHandler_BlockAnnounce/nodeA/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestStartService273492718/001/TestStartService/node/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMDNS3305606105/001/TestMDNS/nodeA/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPeerReputation1884361591/001/TestPeerReputation/nodeA/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestExternalAddrs1050695579/001/TestExternalAddrs/node/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62160/p2p/12D3KooWMiBLnrS89oRoH2gU1R7XMWszbSq2J8w5ZDS8ejXVKys9	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62161/p2p/12D3KooWBE93MzX7kxYTuQhYoFY7vJ3tp3APeVAUqP5HqHnENbdU	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62159/p2p/12D3KooWG3Yd7JcEX6potUvT3GtXRFJ8ppLeDBddUppQDdAR1eqo	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62157/p2p/12D3KooWP2mvWZ8WbrW5cYLZFADQPBGg4FqQEXByqs96uWSdnqHG	pkg=network
=== CONT  TestService_NodeRoles
    service_test.go:266: 
        	Error Trace:	service_test.go:102
        	            				service_test.go:266
        	Error:      	Received unexpected error:
        	            	failed to listen on any addresses: [listen tcp4 0.0.0.0:7000: bind: address already in use]
        	Test:       	TestService_NodeRoles
--- FAIL: TestService_NodeRoles (0.45s)
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62156/p2p/12D3KooWAQNtEidnQJ2e8DvkyQrBgkB4jaZkir59jXsJ6GFyvao8	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62158/p2p/12D3KooWCcmnpVRtC35omwz98xUKmLxbwkfn5agqZP4n3YvaBP4K	pkg=network
=== CONT  TestEncodeLightRequest
--- PASS: TestEncodeLightRequest (0.00s)
=== CONT  TestPeerConnect
2021-12-07T15:11:41-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPeerConnect1777726464/001/TestPeerConnect/nodeA/node.key	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:41-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:41-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62164/p2p/12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_BlockAnnounce955633044/002/TestCreateNotificationsMessageHandler_BlockAnnounce/nodeB/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMDNS3305606105/002/TestMDNS/nodeB/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleLightMessage_Response260855760/002/TestHandleLightMessage_Response/nodeB/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPeerReputation1884361591/002/TestPeerReputation/nodeB/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPeerConnect1777726464/002/TestPeerConnect/nodeB/node.key	pkg=network
--- PASS: TestStartService (1.27s)
=== CONT  TestStreamCloseEOF
=== CONT  Test_RemoveReservedPeers
--- PASS: TestExternalAddrs (1.29s)
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62166/p2p/12D3KooWFfdHrsA5eCcPkQ2MHZNrZu8Vu5Uh6Ehh4ey9H4nJntLZ	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62165/p2p/12D3KooWNyvbfN2caoQKr26YgHpBhHpmbD2iXkLuYpmECXbjUfXY	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestStreamCloseEOF628181184/001/TestStreamCloseEOF/nodeA/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_RemoveReservedPeers1830578322/001/Test_RemoveReservedPeers/nodeA/node.key	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62167/p2p/12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62168/p2p/12D3KooWPpTnXcYQvrydU1hQNh2m4MbYmtMdh69tpBnnQL9icLQF	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62169/p2p/12D3KooWJfYN6Y2tUzhnHfQCMSDhHs1PAtytquMTuwY6xUqPX8Le	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62170/p2p/12D3KooWEfYFMDEaacxhSwEae1njZ2tTcXy42MubdWyFZtEuZLsX	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:42-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62171/p2p/12D3KooWCTjN5ZsiwDNbo4WSdsqb9SnBsNNg3fmqVbZeZWkws8op	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:42-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 WARN ignoring LightRequest without request data	pkg=network
2021-12-07T15:11:43-04:00 DBUG LightResponse message: RemoteCallResponse=Proof = RemoteReadResponse=Proof = RemoteHeaderResponse=Header =[] Proof = RemoteChangesResponse=Max = Proof =[] Roots=[] RootsProof=	pkg=network
2021-12-07T15:11:43-04:00 DBUG cleaning up inbound handshake data for protocol=/gossamer/test/0/light/2, peer=12D3KooWCcmnpVRtC35omwz98xUKmLxbwkfn5agqZP4n3YvaBP4K	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to send LightResponse message to peer 12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd: stream closed	pkg=network
2021-12-07T15:11:43-04:00 DBUG LightResponse message: RemoteCallResponse=Proof = RemoteReadResponse=Proof = RemoteHeaderResponse=Header =[] Proof = RemoteChangesResponse=Max = Proof =[] Roots=[] RootsProof=	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to send LightResponse message to peer 12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd: stream closed	pkg=network
2021-12-07T15:11:43-04:00 DBUG LightResponse message: RemoteCallResponse=Proof = RemoteReadResponse=Proof = RemoteHeaderResponse=Header =[] Proof = RemoteChangesResponse=Max = Proof =[] Roots=[] RootsProof=	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to send LightResponse message to peer 12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd: stream closed	pkg=network
2021-12-07T15:11:43-04:00 DBUG LightResponse message: RemoteCallResponse=Proof = RemoteReadResponse=Proof = RemoteHeaderResponse=Header =[] Proof = RemoteChangesResponse=Max = Proof =[] Roots=[] RootsProof=	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to send LightResponse message to peer 12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd: stream closed	pkg=network
2021-12-07T15:11:43-04:00 DBUG LightResponse message: RemoteCallResponse=Proof = RemoteReadResponse=Proof = RemoteHeaderResponse=Header =[] Proof = RemoteChangesResponse=Max = Proof =[] Roots=[] RootsProof=	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to send LightResponse message to peer 12D3KooWSaSvqrZAZHv4H9GkRbQ3CgmFk9BGUcVyRv68btuQ7CNd: stream closed	pkg=network
2021-12-07T15:11:43-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestStreamCloseEOF628181184/002/TestStreamCloseEOF/nodeB/node.key	pkg=network
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_RemoveReservedPeers1830578322/002/Test_RemoveReservedPeers/nodeB/node.key	pkg=network
--- PASS: TestCreateNotificationsMessageHandler_BlockAnnounce (2.10s)
=== CONT  Test_AddReservedPeers
2021-12-07T15:11:43-04:00 DBUG connection successful with peer 12D3KooWPpTnXcYQvrydU1hQNh2m4MbYmtMdh69tpBnnQL9icLQF	pkg=network
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_AddReservedPeers2803105423/001/Test_AddReservedPeers/nodeA/node.key	pkg=network
2021-12-07T15:11:43-04:00 DBUG connection successful with peer 12D3KooWJfYN6Y2tUzhnHfQCMSDhHs1PAtytquMTuwY6xUqPX8Le	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c0009d21b0 by goroutine 54:
  runtime.mapaccess2_faststr()
      /usr/local/go/src/runtime/map_faststr.go:107 +0x0
  github.com/ChainSafe/gossamer/dot/peerset.(*PeersState).getNode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:117 +0x8b
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).PeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:109 +0x31
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:704 +0x7bd
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c0009d21b0 by goroutine 405:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/peerset.(*PeersState).addReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:224 +0x24f
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).reportPeer()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:325 +0x154
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).doWork()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:714 +0x529
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start·dwrap·1()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x47

Goroutine 54 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 405 (running) created at:
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x170
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:123 +0x154
  github.com/ChainSafe/gossamer/dot/network.(*Service).startPeerSetHandler()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:656 +0x81
  github.com/ChainSafe/gossamer/dot/network.(*Service).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:258 +0xea6
  github.com/ChainSafe/gossamer/dot/network.createTestService()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:106 +0x7a8
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:671 +0x1e4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00079b408 by goroutine 54:
  github.com/ChainSafe/gossamer/dot/peerset.(*PeersState).getNode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:117 +0x99
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).PeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:109 +0x31
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:704 +0x7bd
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c00079b408 by goroutine 405:
  github.com/ChainSafe/gossamer/dot/peerset.(*PeersState).addReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:224 +0x25e
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).reportPeer()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:325 +0x154
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).doWork()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:714 +0x529
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start·dwrap·1()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x47

Goroutine 54 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 405 (running) created at:
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x170
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:123 +0x154
  github.com/ChainSafe/gossamer/dot/network.(*Service).startPeerSetHandler()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:656 +0x81
  github.com/ChainSafe/gossamer/dot/network.(*Service).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:258 +0xea6
  github.com/ChainSafe/gossamer/dot/network.createTestService()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:106 +0x7a8
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:671 +0x1e4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c002a27370 by goroutine 54:
  github.com/ChainSafe/gossamer/dot/peerset.(*node).getReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:92 +0x10a
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).PeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:113 +0x117
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:704 +0x7bd
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c002a27370 by goroutine 405:
  github.com/ChainSafe/gossamer/dot/peerset.(*node).addReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:96 +0x1f0
  github.com/ChainSafe/gossamer/dot/peerset.(*PeersState).addReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerstate.go:223 +0x36
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).reportPeer()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:325 +0x154
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).doWork()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:714 +0x529
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start·dwrap·1()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x47

Goroutine 54 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 405 (running) created at:
  github.com/ChainSafe/gossamer/dot/peerset.(*PeerSet).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/peerset.go:673 +0x170
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:123 +0x154
  github.com/ChainSafe/gossamer/dot/network.(*Service).startPeerSetHandler()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:656 +0x81
  github.com/ChainSafe/gossamer/dot/network.(*Service).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:258 +0xea6
  github.com/ChainSafe/gossamer/dot/network.createTestService()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:106 +0x7a8
  github.com/ChainSafe/gossamer/dot/network.TestPeerReputation()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:671 +0x1e4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
2021-12-07T15:11:43.381-0400	ERROR	peerstore/ds	pstoreds/addr_book.go:382	failed to update ttls for peer 12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC: datastore closed

2021-12-07T15:11:43.384-0400	ERROR	peerstore/ds	pstoreds/addr_book.go:382	failed to update ttls for peer 12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC: datastore closed

2021-12-07T15:11:43.384-0400	ERROR	peerstore/ds	pstoreds/addr_book.go:304	unable to load record	{"peer": "12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC", "error": "datastore closed"}
2021-12-07T15:11:43.386-0400	ERROR	peerstore/ds	pstoreds/addr_book.go:382	failed to update ttls for peer 12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC: datastore closed

2021-12-07T15:11:43.386-0400	ERROR	peerstore/ds	pstoreds/keybook.go:65	error when fetching pubkey from datastore for peer 12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC: datastore closed

2021-12-07T15:11:43.386-0400	ERROR	peerstore/ds	pstoreds/keybook.go:85	error while updating pubkey in datastore for peer 12D3KooWSmfSukzsbx1mAwxuqfY67TWUGMbwTAa6srRJnf3qVbdC: datastore closed

2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62173/p2p/12D3KooWPCUd2fy16FgXbhz8bWWwwW2M5WVTTB57n73eagCAcrXL	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62174/p2p/12D3KooWLJKHfhdGwxYT56xZDpnebs5mscecShB8MiHmz5BTPhp5	pkg=network
=== CONT  TestHandleLightMessage_Response
    testing.go:1152: race detected during execution of test
--- FAIL: TestHandleLightMessage_Response (2.44s)
=== CONT  Test_PeerSupportsProtocol
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_PeerSupportsProtocol3369924812/001/Test_PeerSupportsProtocol/nodeA/node.key	pkg=network
=== CONT  TestPeerConnect
    testing.go:1152: race detected during execution of test
=== CONT  TestBannedPeer
--- FAIL: TestPeerConnect (2.11s)
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62175/p2p/12D3KooWPnW9mVec2kALsGUJs87q5rtvyRyRLtD3or5RsH7Dm2wt	pkg=network
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBannedPeer708241556/001/TestBannedPeer/nodeA/node.key	pkg=network
=== CONT  TestPeerReputation
    testing.go:1152: race detected during execution of test
=== CONT  TestStreamCloseMetadataCleanup
--- FAIL: TestPeerReputation (2.58s)
2021-12-07T15:11:43-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestStreamCloseMetadataCleanup2408381794/001/TestStreamCloseMetadataCleanup/nodeA/node.key	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62176/p2p/12D3KooWRop7QLyggKNiV3Lt9fj7Ze7iUx7cmn8MKGkdzno5QM7d	pkg=network
2021-12-07T15:11:43-04:00 WARN failed to open connection for peer 12D3KooWMiBLnrS89oRoH2gU1R7XMWszbSq2J8w5ZDS8ejXVKys9: context canceled	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62177/p2p/12D3KooWBBmoifSMnxAvb5Bjoam2UzJvmejx8vxJJcTk9yFFKGBk	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:43-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:43-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62178/p2p/12D3KooWCbpQ31keVNk4dn9CmT4A2P2N27toTnkSvaHhiTuRowet	pkg=network
2021-12-07T15:11:43-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestMDNS
    testing.go:1152: race detected during execution of test
--- FAIL: TestMDNS (2.97s)
=== CONT  TestSend
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSend2500032399/001/TestSend/nodeA/node.key	pkg=network
2021-12-07T15:11:44-04:00 DBUG connection successful with peer 12D3KooWLJKHfhdGwxYT56xZDpnebs5mscecShB8MiHmz5BTPhp5	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_AddReservedPeers2803105423/002/Test_AddReservedPeers/nodeB/node.key	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62179/p2p/12D3KooWH3SSHoF7hThf7dBSLL4SyNG31Q9U82cmEH3q6ZPMBHby	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62180/p2p/12D3KooWHRPLftQB1vPq9k4gMUhcx2Z24cPTxeVsM3LTd9STpZci	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_PeerSupportsProtocol3369924812/002/Test_PeerSupportsProtocol/nodeB/node.key	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBannedPeer708241556/002/TestBannedPeer/nodeB/node.key	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestStreamCloseMetadataCleanup2408381794/002/TestStreamCloseMetadataCleanup/nodeB/node.key	pkg=network
=== CONT  Test_RemoveReservedPeers
    testing.go:1152: race detected during execution of test
--- FAIL: Test_RemoveReservedPeers (2.10s)
=== CONT  TestExistingStream
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestExistingStream3148575516/001/TestExistingStream/nodeA/node.key	pkg=network
=== CONT  TestMessageCache
    testing.go:1152: race detected during execution of test
--- FAIL: TestMessageCache (3.51s)
=== CONT  TestBootstrap
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62181/p2p/12D3KooWD5TqwhVfj6GHNp8bj1Ranaq3ULCYR5jybRht3KnTuxC2	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBootstrap4133955048/001/TestBootstrap/nodeA/node.key	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62182/p2p/12D3KooWJ735qbkoTbDgXYUNzz87LEdaUVeV1SbfEgKJcGJ37Hhy	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62183/p2p/12D3KooWDSCmBnEKvLeLx6qA14Z2KRy49fUYRLrnSf7ubmKfzwUa	pkg=network
2021-12-07T15:11:44-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSend2500032399/002/TestSend/nodeB/node.key	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62184/p2p/12D3KooWAHtYUHS5CSy6HreP7j52p6if5UgrSXbn5cqexsB6M1Nd	pkg=network
2021-12-07T15:11:44-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62185/p2p/12D3KooWQGPvaRWXMnmDcp3yGqkj686F6m96yAcKT2r7SJ9uc15d	pkg=network
2021-12-07T15:11:44-04:00 DBUG connection successful with peer 12D3KooWHRPLftQB1vPq9k4gMUhcx2Z24cPTxeVsM3LTd9STpZci	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:44-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:44-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62186/p2p/12D3KooWSQSEmbe1CtshHaZSBjDdxc1vDzyuANRWBeu8vGMMDgTa	pkg=network
=== CONT  Test_AddReservedPeers
    testing.go:1152: race detected during execution of test
--- FAIL: Test_AddReservedPeers (1.89s)
=== CONT  TestExternalAddrsPublicIP
2021-12-07T15:11:45-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestExternalAddrsPublicIP1746639313/001/TestExternalAddrsPublicIP/node/node.key	pkg=network
2021-12-07T15:11:45-04:00 DBUG using config PublicIP: 10.0.5.2	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62187/p2p/12D3KooWLGFgb2WkjU3FSTaNN7cma3eTzYg4m1MkM5n8yEtYCGrD	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/10.0.5.2/tcp/62187/p2p/12D3KooWLGFgb2WkjU3FSTaNN7cma3eTzYg4m1MkM5n8yEtYCGrD	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 DBUG connection successful with peer 12D3KooWJ735qbkoTbDgXYUNzz87LEdaUVeV1SbfEgKJcGJ37Hhy	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestExistingStream3148575516/002/TestExistingStream/nodeB/node.key	pkg=network
2021-12-07T15:11:45-04:00 CRIT highest rated peer is below bannedThresholdValue	pkg=peerset
2021-12-07T15:11:45-04:00 DBUG connection dropped successfully for peer 12D3KooWJ735qbkoTbDgXYUNzz87LEdaUVeV1SbfEgKJcGJ37Hhy	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
--- PASS: Test_PeerSupportsProtocol (1.87s)
=== CONT  TestBlockAnnounceHandshakeSize
=== CONT  Test_sizedBufferPool
--- PASS: TestBlockAnnounceHandshakeSize (0.00s)
=== CONT  TestCreateNotificationsMessageHandler_HandleTransaction
--- PASS: Test_sizedBufferPool (0.00s)
2021-12-07T15:11:45-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBootstrap4133955048/002/TestBootstrap/nodeB/node.key	pkg=network
2021-12-07T15:11:45-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_HandleTransaction1841669110/001/TestCreateNotificationsMessageHandler_HandleTransaction/nodeA/node.key	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62188/p2p/12D3KooWDBktPNfUoZ8UgiDyr5z1Zs85CoVpsk41HRvwwgiTj5zh	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62189/p2p/12D3KooWLo6E3tr8XUNTWokovrCgRMNTYDmnWbTgjfwxFLqKHS8d	pkg=network
2021-12-07T15:11:45-04:00 DBUG bootstrapping to peer 12D3KooWQGPvaRWXMnmDcp3yGqkj686F6m96yAcKT2r7SJ9uc15d	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62190/p2p/12D3KooWRP7VtAx2Q162feHwpuvYJ8bsXzonhT29R4bA8rgn6oqW	pkg=network
2021-12-07T15:11:45-04:00 DBUG connection successful with peer 12D3KooWQGPvaRWXMnmDcp3yGqkj686F6m96yAcKT2r7SJ9uc15d	pkg=network
2021-12-07T15:11:45-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestBroadcastMessages
--- PASS: TestExternalAddrsPublicIP (0.71s)
2021-12-07T15:11:45-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBroadcastMessages589663730/001/TestBroadcastMessages/nodeA/node.key	pkg=network
2021-12-07T15:11:45-04:00 CRIT highest rated peer is below bannedThresholdValue	pkg=peerset
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:45-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:45-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62191/p2p/12D3KooWAhH419ndawhDxtg63r9t7e44UQdXyWu2rZPK87VwPcLF	pkg=network
2021-12-07T15:11:46-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_HandleTransaction1841669110/002/TestCreateNotificationsMessageHandler_HandleTransaction/nodeB/node.key	pkg=network
2021-12-07T15:11:46-04:00 DBUG cleaning up inbound handshake data for protocol=/gossamer/test/0/block-announces/1, peer=12D3KooWCbpQ31keVNk4dn9CmT4A2P2N27toTnkSvaHhiTuRowet	pkg=network
=== CONT  Test_HandshakeTimeout
--- PASS: TestBootstrap (1.80s)
2021-12-07T15:11:46-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62193/p2p/12D3KooWSFukgzSvkZWDqt5T2s6X57LjCD487ZvsGceH7LRk3ZhT	pkg=network
2021-12-07T15:11:46-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_HandshakeTimeout405226065/001/Test_HandshakeTimeout/nodeA/node.key	pkg=network
2021-12-07T15:11:46-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBroadcastMessages589663730/002/TestBroadcastMessages/nodeB/node.key	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c039eb4960 by goroutine 45:
  runtime.mapaccess2_faststr()
      /usr/local/go/src/runtime/map_faststr.go:107 +0x0
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:209 +0xa3c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c039eb4960 by goroutine 265:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x1f5
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c00281c4a8 by goroutine 45:
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:209 +0xa4d
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c00281c4a8 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x204
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c01846d330 by goroutine 45:
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xae4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c01846d330 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x17c
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c03737f320 by goroutine 45:
  reflect.typedmemmove()
      /usr/local/go/src/runtime/mbarrier.go:178 +0x0
  reflect.packEface()
      /usr/local/go/src/reflect/value.go:123 +0xae
  reflect.valueInterface()
      /usr/local/go/src/reflect/value.go:1381 +0x18a
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:154 +0x9dc
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c03737f320 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:194 +0x77b
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c03737f328 by goroutine 45:
  reflect.Value.IsNil()
      /usr/local/go/src/reflect/value.go:1425 +0x1d8
  reflect.deepValueEqual.func1()
      /usr/local/go/src/reflect/deepequal.go:50 +0x11d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:55 +0x16d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c03737f328 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:195 +0x7c8
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c03737f338 by goroutine 45:
  reflect.Value.IsNil()
      /usr/local/go/src/reflect/value.go:1419 +0x225
  reflect.deepValueEqual.func1()
      /usr/local/go/src/reflect/deepequal.go:50 +0x11d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:55 +0x16d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c03737f338 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:196 +0x835
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c0374164a0 by goroutine 45:
  reflect.typedmemmove()
      /usr/local/go/src/runtime/mbarrier.go:178 +0x0
  reflect.packEface()
      /usr/local/go/src/reflect/value.go:123 +0xae
  reflect.valueInterface()
      /usr/local/go/src/reflect/value.go:1381 +0x18a
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:154 +0x9dc
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:90 +0x1684
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c0374164a0 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:182 +0x6fa
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c03737f340 by goroutine 45:
  reflect.typedmemmove()
      /usr/local/go/src/runtime/mbarrier.go:178 +0x0
  reflect.packEface()
      /usr/local/go/src/reflect/value.go:123 +0xae
  reflect.valueInterface()
      /usr/local/go/src/reflect/value.go:1381 +0x18a
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:154 +0x9dc
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c03737f340 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:197 +0x89a
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c03737f348 by goroutine 45:
  reflect.Value.IsNil()
      /usr/local/go/src/reflect/value.go:1419 +0x225
  reflect.deepValueEqual.func1()
      /usr/local/go/src/reflect/deepequal.go:50 +0x11d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:55 +0x16d
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c03737f348 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:198 +0x8ba
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c0184317fc by goroutine 45:
  reflect.typedmemmove()
      /usr/local/go/src/runtime/mbarrier.go:178 +0x0
  reflect.packEface()
      /usr/local/go/src/reflect/value.go:123 +0xae
  reflect.valueInterface()
      /usr/local/go/src/reflect/value.go:1381 +0x18a
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:154 +0x9dc
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:123 +0x142c
  reflect.deepValueEqual()
      /usr/local/go/src/reflect/deepequal.go:120 +0xfe7
  reflect.DeepEqual()
      /usr/local/go/src/reflect/deepequal.go:218 +0x404
  github.com/stretchr/testify/assert.ObjectsAreEqual()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:65 +0x184
  github.com/stretchr/testify/assert.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/assert/assertions.go:343 +0x212
  github.com/stretchr/testify/require.Equal()
      /Users/eclesiojunior/go/pkg/mod/github.com/stretchr/testify@v1.7.0/require/require.go:162 +0xc8
  github.com/ChainSafe/gossamer/dot/network.TestSend()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:212 +0xb54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c0184317f8 by goroutine 265:
  github.com/ChainSafe/gossamer/dot/network/proto.(*BlockRequest).Reset()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/proto/api.v1.pb.go:102 +0x37
  google.golang.org/protobuf/proto.Reset()
      /Users/eclesiojunior/go/pkg/mod/google.golang.org/protobuf@v1.27.1/proto/reset.go:18 +0x4d
  google.golang.org/protobuf/proto.UnmarshalOptions.unmarshal()
      /Users/eclesiojunior/go/pkg/mod/google.golang.org/protobuf@v1.27.1/proto/decode.go:77 +0xcc
  google.golang.org/protobuf/proto.Unmarshal()
      /Users/eclesiojunior/go/pkg/mod/google.golang.org/protobuf@v1.27.1/proto/decode.go:50 +0xa4
  github.com/ChainSafe/gossamer/dot/network.(*BlockRequestMessage).Decode()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/message.go:152 +0xf4
  github.com/ChainSafe/gossamer/dot/network.testBlockRequestMessageDecoder()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:211 +0x51
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:177 +0x29e
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 45 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 265 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
2021-12-07T15:11:46-04:00 DBUG failed to read from stream using protocol /gossamer/test/0: failed to read length: stream reset	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62194/p2p/12D3KooWSBvartm6iyHQxxxSDR9XmbbujdG5CboJ7QrDqedRL4Vk	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62195/p2p/12D3KooWN4eJPYgmfrftNnEkT8xqEh8Ki5QdcxpfwXiFgSm3nxaS	pkg=network
=== CONT  TestSend
    testing.go:1152: race detected during execution of test
=== CONT  TestCreateDecoder_BlockAnnounce
--- FAIL: TestSend (2.75s)
2021-12-07T15:11:46-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateDecoder_BlockAnnounce2692604889/001/TestCreateDecoder_BlockAnnounce/nodeA/node.key	pkg=network
2021-12-07T15:11:46-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:46-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:46-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62196/p2p/12D3KooWSwbQNpaev8NUDMfje2F5GFmZsSCMRVRSMwsTKXtPwqVM	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c01a12dc80 by goroutine 46:
  runtime.mapaccess1_faststr()
      /usr/local/go/src/runtime/map_faststr.go:12 +0x0
  github.com/ChainSafe/gossamer/dot/network.TestExistingStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:262 +0xcbc
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c01a12dc80 by goroutine 145:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x1f5
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 46 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 145 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c0027c8b88 by goroutine 46:
  github.com/ChainSafe/gossamer/dot/network.TestExistingStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:262 +0xcc9
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c0027c8b88 by goroutine 145:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x204
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 46 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 145 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
2021-12-07T15:11:47-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 DBUG transaction message TransactionMessage extrinsics count=2 for peer 12D3KooWSFukgzSvkZWDqt5T2s6X57LjCD487ZvsGceH7LRk3ZhT not included into batch	pkg=network
2021-12-07T15:11:47-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 DBUG gossiping from host 12D3KooWAhH419ndawhDxtg63r9t7e44UQdXyWu2rZPK87VwPcLF message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:47-04:00 INFO Generating p2p identity with seed 2 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/Test_HandshakeTimeout405226065/002/Test_HandshakeTimeout/nodeB/node.key	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62197/p2p/12D3KooWKRyzVWW6ChFjQjK4miCty85Niy49tpPV95XdKu1BcvMA	pkg=network
2021-12-07T15:11:47-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestCreateDecoder_BlockAnnounce
    testing.go:1152: race detected during execution of test
=== CONT  TestCreateNotificationsMessageHandler_BlockAnnounceHandshake
--- FAIL: TestCreateDecoder_BlockAnnounce (0.79s)
=== CONT  TestStreamCloseMetadataCleanup
    testing.go:1152: race detected during execution of test
=== CONT  TestDecodeConsensusMessage
--- FAIL: TestStreamCloseMetadataCleanup (3.91s)
=== CONT  TestDecodeTransactionMessageTwoExtrinsics
--- PASS: TestDecodeConsensusMessage (0.00s)
=== CONT  TestPersistentPeers
--- PASS: TestDecodeTransactionMessageTwoExtrinsics (0.00s)
2021-12-07T15:11:47-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_BlockAnnounceHandshake2481247258/001/TestCreateNotificationsMessageHandler_BlockAnnounceHandshake/nodeA/node.key	pkg=network
2021-12-07T15:11:47-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPersistentPeers1237940489/001/TestPersistentPeers/node-a/node.key	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:47-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62199/p2p/12D3KooWNLGwDjZHErgH8ma8ucsgfKvQ24M44S997Tig3NC9y5R1	pkg=network
2021-12-07T15:11:47-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62198/p2p/12D3KooWDRZQ3puWif4dvULPHYGis2rB9fqKCSiAkP5FL8gmMw3E	pkg=network
2021-12-07T15:11:47-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:47-04:00 DBUG gossiping from host 12D3KooWN4eJPYgmfrftNnEkT8xqEh8Ki5QdcxpfwXiFgSm3nxaS message of type 0: BlockAnnounceHandshake Roles=4 BestBlockNumber=77 BestBlockHash=0x0100000000000000000000000000000000000000000000000000000000000000 GenesisHash=0x0200000000000000000000000000000000000000000000000000000000000000	pkg=network
2021-12-07T15:11:47-04:00 EROR message type 0 not supported by any notifications protocol	pkg=network
2021-12-07T15:11:47-04:00 DBUG connection successful with peer 12D3KooWJ735qbkoTbDgXYUNzz87LEdaUVeV1SbfEgKJcGJ37Hhy	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c01841dd10 by goroutine 46:
  runtime.mapaccess1_faststr()
      /usr/local/go/src/runtime/map_faststr.go:12 +0x0
  github.com/ChainSafe/gossamer/dot/network.TestExistingStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:274 +0x1008
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c01841dd10 by goroutine 803:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x1f5
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 46 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 803 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c00281d688 by goroutine 46:
  github.com/ChainSafe/gossamer/dot/network.TestExistingStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:274 +0x1015
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c00281d688 by goroutine 803:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x204
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 46 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 803 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
2021-12-07T15:11:48-04:00 DBUG failed to read from stream using protocol /gossamer/test/0: failed to read length: stream reset	pkg=network
2021-12-07T15:11:48-04:00 DBUG failed to read from stream using protocol /gossamer/test/0: failed to read length: stream reset	pkg=network
=== CONT  TestExistingStream
    testing.go:1152: race detected during execution of test
=== CONT  TestGossip
--- FAIL: TestExistingStream (3.78s)
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestGossip2213110089/001/TestGossip/nodeA/node.key	pkg=network
2021-12-07T15:11:48-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestCreateNotificationsMessageHandler_BlockAnnounceHandshake2481247258/002/TestCreateNotificationsMessageHandler_BlockAnnounceHandshake/nodeB/node.key	pkg=network
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPersistentPeers1237940489/002/TestPersistentPeers/node-b/node.key	pkg=network
2021-12-07T15:11:48-04:00 WARN Bootstrap is enabled but no bootstrap nodes are defined	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62200/p2p/12D3KooWJRdreg19QjcfinJGMCSgRhiJxUxAK5VihTgkcqEaHZpc	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62202/p2p/12D3KooWCg2WZBWGLG3UijFGfjgp82AJdbuDUqQGXTkaeHJiKEhc	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62201/p2p/12D3KooWDFKU2dhnWYhPendGPb6gvHDxyg28qUVzgDLXdCURZ4x8	pkg=network
=== CONT  TestBannedPeer
    testing.go:1152: race detected during execution of test
--- FAIL: TestBannedPeer (5.06s)
=== CONT  TestBeginDiscovery_ThreeNodes
2021-12-07T15:11:48-04:00 DBUG connection successful with peer 12D3KooWNLGwDjZHErgH8ma8ucsgfKvQ24M44S997Tig3NC9y5R1	pkg=network
=== CONT  TestCreateNotificationsMessageHandler_HandleTransaction
    testing.go:1152: race detected during execution of test
=== CONT  TestConnect
--- FAIL: TestCreateNotificationsMessageHandler_HandleTransaction (3.33s)
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBeginDiscovery_ThreeNodes1266815733/001/TestBeginDiscovery_ThreeNodes/nodeA/node.key	pkg=network
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestConnect3512296640/001/TestConnect/nodeA/node.key	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62203/p2p/12D3KooWAbajoSTzWdcss4f6GGVHUjrkMMgWANN5vXgALzVcz7RV	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:48-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62204/p2p/12D3KooWQdCdMhiKzQjArPkwxzwRSz6o4QCp9Cnvw2uEUr6F3Qfb	pkg=network
2021-12-07T15:11:48-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:48-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestGossip2213110089/002/TestGossip/nodeB/node.key	pkg=network
2021-12-07T15:11:49-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62206/p2p/12D3KooWREVv5fAe1Tg9hJk4oVuz4g4DvBTcHYBaLrp5ZiKj8vXy	pkg=network
2021-12-07T15:11:49-04:00 DBUG cleaning up inbound handshake data for protocol=/gossamer/test/0/block-announces/1, peer=12D3KooWDRZQ3puWif4dvULPHYGis2rB9fqKCSiAkP5FL8gmMw3E	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c01aa7cb98 by goroutine 51:
  github.com/ChainSafe/gossamer/dot/network.TestStreamCloseEOF()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host_test.go:555 +0xa5e
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c01aa7cb98 by goroutine 156:
  [failed to restore the stack]

Goroutine 51 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264
==================
==================
WARNING: DATA RACE
Read at 0x00c01aafbd70 by goroutine 86:
  runtime.mapaccess1_faststr()
      /usr/local/go/src/runtime/map_faststr.go:12 +0x0
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastMessages()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:181 +0x9a4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c01aafbd70 by goroutine 729:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x1f5
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 86 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 729 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c00017cb88 by goroutine 86:
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastMessages()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:181 +0x9b1
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c00017cb88 by goroutine 729:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x204
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 86 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 729 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
2021-12-07T15:11:49-04:00 DBUG failed to read from stream using protocol /gossamer/test/0/block-announces/1: failed to read length: stream reset	pkg=network
2021-12-07T15:11:49-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestCreateNotificationsMessageHandler_BlockAnnounceHandshake
    testing.go:1152: race detected during execution of test
--- FAIL: TestCreateNotificationsMessageHandler_BlockAnnounceHandshake (1.89s)
=== CONT  TestBeginDiscovery
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestConnect3512296640/002/TestConnect/nodeB/node.key	pkg=network
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBeginDiscovery_ThreeNodes1266815733/002/TestBeginDiscovery_ThreeNodes/nodeB/node.key	pkg=network
=== CONT  TestStreamCloseEOF
    testing.go:1152: race detected during execution of test
--- FAIL: TestStreamCloseEOF (7.14s)
=== CONT  TestSetReservedPeer
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBeginDiscovery4139306148/001/TestBeginDiscovery/nodeA/node.key	pkg=network
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSetReservedPeer4131427128/001/TestSetReservedPeer/node0/node.key	pkg=network
=== CONT  TestBroadcastMessages
    testing.go:1152: race detected during execution of test
--- FAIL: TestBroadcastMessages (3.76s)
=== CONT  TestRemovePeer
2021-12-07T15:11:49-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestRemovePeer1248976336/001/TestRemovePeer/nodeA/node.key	pkg=network
2021-12-07T15:11:49-04:00 DBUG connection dropped successfully for peer 12D3KooWDFKU2dhnWYhPendGPb6gvHDxyg28qUVzgDLXdCURZ4x8	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62208/p2p/12D3KooWGroNdAEDrwehMGsAT4T8AyUU7SfBkVxAMpseC1jR2h2c	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62207/p2p/12D3KooWNwHviYopwQCGgecFQGDVCckUCBmHwuRbeZWMdecJ78h3	pkg=network
2021-12-07T15:11:49-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestGossip2213110089/003/TestGossip/nodeC/node.key	pkg=network
2021-12-07T15:11:49-04:00 DBUG connection successful with peer 12D3KooWDFKU2dhnWYhPendGPb6gvHDxyg28qUVzgDLXdCURZ4x8	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62209/p2p/12D3KooWAoiSfVXPzG8VQHwqjAsSFWzd9DsG48jX88EqijnSHqMP	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62210/p2p/12D3KooWHgdy3qMQxgG6T9YCQ5UCeCt1KFnNVG9Mfkdp4TiSVpEf	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62211/p2p/12D3KooWJHY9ifKiu8G3APt43PkPTGG4DjLRqqK3KHiMeKNaAzQM	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:49-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:49-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62212/p2p/12D3KooWBYXkxbeZEemkj3bAmtCnD4LPztWWunQfKArz9UDmxCfW	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBeginDiscovery_ThreeNodes1266815733/003/TestBeginDiscovery_ThreeNodes/nodeC/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBeginDiscovery4139306148/002/TestBeginDiscovery/nodeB/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSetReservedPeer4131427128/002/TestSetReservedPeer/node1/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestPersistentPeers
    testing.go:1152: race detected during execution of test
=== CONT  TestKadDHT
--- FAIL: TestPersistentPeers (2.86s)
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestRemovePeer1248976336/002/TestRemovePeer/nodeB/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestKadDHT3322804755/001/TestKadDHT/node0/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62214/p2p/12D3KooWN9fGfeJz48B9RSuhA91JrJSBetf44Uob5j265TShdVSf	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62215/p2p/12D3KooWA9ARATFvgZCJxpYB9jRuxc8ZH7aU3Kpook9qhxMVVT5j	pkg=network
=== CONT  TestConnect
    testing.go:1152: race detected during execution of test
=== CONT  TestProtectUnprotectPeer
--- FAIL: TestConnect (2.00s)
=== CONT  TestBuild
--- PASS: TestProtectUnprotectPeer (0.00s)
--- PASS: TestBuild (0.02s)
=== CONT  TestMinPeers
=== CONT  TestGossip
    gossip_test.go:93: 
        	Error Trace:	gossip_test.go:93
        	Error:      	Received unexpected error:
        	            	protocol not supported
        	Test:       	TestGossip
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62218/p2p/12D3KooWGVUcZc5ydFFnKrJuzVMuJtC1imWaSW7cjhhLkn3gApM7	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62216/p2p/12D3KooWEyUoeqjDYN6WnJwdXQh8WizGnkfCAyPHLxDE14UB4a8A	pkg=network
2021-12-07T15:11:50-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMinPeers255884799/001/TestMinPeers/node0/node.key	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62217/p2p/12D3KooWRpAxRBs46M5bnTrCCxJ5TXVTykKVRdbNBimqZM7ikp9p	pkg=network
2021-12-07T15:11:50-04:00 DBUG bootstrapping to peer 12D3KooWJHY9ifKiu8G3APt43PkPTGG4DjLRqqK3KHiMeKNaAzQM	pkg=network
2021-12-07T15:11:50-04:00 DBUG connection successful with peer 12D3KooWJHY9ifKiu8G3APt43PkPTGG4DjLRqqK3KHiMeKNaAzQM	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:50-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:50-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62219/p2p/12D3KooWNH2tNoGUF9UyiNqLWwudcjHN1HiqL9m8n2msCoTKjRp1	pkg=network
2021-12-07T15:11:50-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
    testing.go:1152: race detected during execution of test
=== CONT  TestMaxPeers
--- FAIL: TestGossip (2.79s)
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMaxPeers4115633594/001/TestMaxPeers/node0/node.key	pkg=network
2021-12-07T15:11:51-04:00 WARN min peers higher than max peers; setting to default	pkg=network
2021-12-07T15:11:51-04:00 DBUG starting DHT with bootnodes [{12D3KooWGroNdAEDrwehMGsAT4T8AyUU7SfBkVxAMpseC1jR2h2c: [/ip4/127.0.0.1/tcp/62208]} {12D3KooWN9fGfeJz48B9RSuhA91JrJSBetf44Uob5j265TShdVSf: [/ip4/127.0.0.1/tcp/62214]}]...	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62220/p2p/12D3KooWHsmHJX5RY3h87vdqjes1HndPthZRcWAfMQjTcpjwL4ji	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 DBUG starting DHT with bootnodes [{12D3KooWA9ARATFvgZCJxpYB9jRuxc8ZH7aU3Kpook9qhxMVVT5j: [/ip4/127.0.0.1/tcp/62215]}]...	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestKadDHT3322804755/002/TestKadDHT/node1/node.key	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSetReservedPeer4131427128/003/TestSetReservedPeer/node2/node.key	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62221/p2p/12D3KooWFTfVLryKHvqxsvPsf8BTafvEKrqyH72p83KJncYuS6x9	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62222/p2p/12D3KooWGJydEQuDLDK8MagBoXmSQL2YMyNjzE1EgSbVs44a5ubB	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMinPeers255884799/002/TestMinPeers/node1/node.key	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62223/p2p/12D3KooWJn75pW1oJTHB2GwowSCwWtdCCpvMw6CkhDWEjRLPTPYE	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMaxPeers4115633594/002/TestMaxPeers/node1/node.key	pkg=network
2021-12-07T15:11:51-04:00 WARN min peers higher than max peers; setting to default	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:51-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62224/p2p/12D3KooWDVHGZJoFm8AHmtkdpYFBzwQ1yFyG3Y41KeyoUatLWnwb	pkg=network
2021-12-07T15:11:51-04:00 DBUG connection dropped successfully for peer 12D3KooWJHY9ifKiu8G3APt43PkPTGG4DjLRqqK3KHiMeKNaAzQM	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestKadDHT3322804755/003/TestKadDHT/node2/node.key	pkg=network
2021-12-07T15:11:51-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestSetReservedPeer4131427128/004/TestSetReservedPeer/node3/node.key	pkg=network
2021-12-07T15:11:51-04:00 WARN Bootstrap is enabled but no bootstrap nodes are defined	pkg=network
2021-12-07T15:11:52-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:11:52-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMinPeers255884799/003/TestMinPeers/nodeB/node.key	pkg=network
2021-12-07T15:11:52-04:00 DBUG starting DHT with bootnodes [{12D3KooWAbajoSTzWdcss4f6GGVHUjrkMMgWANN5vXgALzVcz7RV: [/ip4/127.0.0.1/tcp/62203]}]...	pkg=network
2021-12-07T15:11:52-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:11:52-04:00 WARN failed to advertise in the DHT: failed to find any peer in table	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62227/p2p/12D3KooWRLiivSXva6zTzq5qDZhLbZwU9W5jKnfdtfQAk97C6aHT	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62226/p2p/12D3KooWDVVqUwFB8kxFiXpptNadjUFKqasssD2yRWiKJ9jTdwQU	pkg=network
2021-12-07T15:11:52-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:11:52-04:00 DBUG starting DHT with bootnodes [{12D3KooWAoiSfVXPzG8VQHwqjAsSFWzd9DsG48jX88EqijnSHqMP: [/ip4/127.0.0.1/tcp/62209]}]...	pkg=network
2021-12-07T15:11:52-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:11:52-04:00 WARN failed to advertise in the DHT: failed to find any peer in table	pkg=network
2021-12-07T15:11:52-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMaxPeers4115633594/003/TestMaxPeers/node2/node.key	pkg=network
2021-12-07T15:11:52-04:00 WARN min peers higher than max peers; setting to default	pkg=network
2021-12-07T15:11:52-04:00 DBUG connection successful with peer 12D3KooWHgdy3qMQxgG6T9YCQ5UCeCt1KFnNVG9Mfkdp4TiSVpEf	pkg=network
=== CONT  TestMinPeers
    connmgr_test.go:47: 
        	Error Trace:	service_test.go:102
        	            				connmgr_test.go:47
        	Error:      	Received unexpected error:
        	            	failed to listen on any addresses: [listen tcp4 0.0.0.0:62228: socket: too many open files]
        	Test:       	TestMinPeers
2021-12-07T15:11:52.369-0400	ERROR	badger	v2@v2.2007.4/db.go:1086	ERROR while syncing level directory: While opening directory: /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMinPeers255884799/002/TestMinPeers/node1/libp2p-datastore.: open /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMinPeers255884799/002/TestMinPeers/node1/libp2p-datastore: too many open files
=== CONT  TestRemovePeer
    testing.go:967: TempDir RemoveAll cleanup: openfdat /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestRemovePeer1248976336/001: too many open files
--- FAIL: TestRemovePeer (2.85s)
=== CONT  TestBuildIdentity
=== CONT  TestMaxPeers
    connmgr_test.go:73: 
        	Error Trace:	service_test.go:102
        	            				connmgr_test.go:73
        	Error:      	Received unexpected error:
        	            	open /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestMaxPeers4115633594/003/TestMaxPeers/node2/libp2p-datastore/KEYREGISTRY: too many open files
        	            	Error while opening key registry.
        	            	github.com/dgraph-io/badger/v2/y.Wrapf
        	            		/Users/eclesiojunior/go/pkg/mod/github.com/dgraph-io/badger/v2@v2.2007.4/y/error.go:82
        	            	github.com/dgraph-io/badger/v2.OpenKeyRegistry
        	            		/Users/eclesiojunior/go/pkg/mod/github.com/dgraph-io/badger/v2@v2.2007.4/key_registry.go:114
        	            	github.com/dgraph-io/badger/v2.Open
        	            		/Users/eclesiojunior/go/pkg/mod/github.com/dgraph-io/badger/v2@v2.2007.4/db.go:352
        	            	github.com/ipfs/go-ds-badger2.NewDatastore
        	            		/Users/eclesiojunior/go/pkg/mod/github.com/ipfs/go-ds-badger2@v0.1.1/datastore.go:150
        	            	github.com/ChainSafe/gossamer/dot/network.newHost
        	            		/Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/host.go:132
        	            	github.com/ChainSafe/gossamer/dot/network.NewService
        	            		/Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:130
        	            	github.com/ChainSafe/gossamer/dot/network.createTestService
        	            		/Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:101
        	            	github.com/ChainSafe/gossamer/dot/network.TestMaxPeers
        	            		/Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/connmgr_test.go:73
        	            	testing.tRunner
        	            		/usr/local/go/src/testing/testing.go:1259
        	            	runtime.goexit
        	            		/usr/local/go/src/runtime/asm_amd64.s:1581
        	Test:       	TestMaxPeers
=== CONT  TestValidateBlockAnnounceHandshake
--- PASS: TestBuildIdentity (0.05s)
2021-12-07T15:11:52-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestValidateBlockAnnounceHandshake1562373538/001/TestValidateBlockAnnounceHandshake/nodeA/node.key	pkg=network
2021-12-07T15:11:52-04:00 DBUG connection successful with peer 12D3KooWEyUoeqjDYN6WnJwdXQh8WizGnkfCAyPHLxDE14UB4a8A	pkg=network
2021-12-07T15:11:52-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
--- FAIL: TestMinPeers (1.97s)
=== CONT  TestStreamManager
--- FAIL: TestMaxPeers (1.68s)
=== CONT  TestHandleTransactionMessage
==================
WARNING: DATA RACE
Write at 0x000005df0ec8 by goroutine 93:
  github.com/ChainSafe/gossamer/dot/network.setupStreamManagerTest()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/stream_manager_test.go:26 +0x8f
  github.com/ChainSafe/gossamer/dot/network.TestStreamManager()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/stream_manager_test.go:69 +0x54
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous read at 0x000005df0ec8 by goroutine 535:
  github.com/ChainSafe/gossamer/dot/network.(*streamManager).start.func1()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/stream_manager.go:39 +0x4a

Goroutine 93 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 535 (running) created at:
  github.com/ChainSafe/gossamer/dot/network.(*streamManager).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/stream_manager.go:38 +0x90
  github.com/ChainSafe/gossamer/dot/network.(*Service).Start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:284 +0x136c
  github.com/ChainSafe/gossamer/dot/network.createTestService()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:106 +0x7a8
  github.com/ChainSafe/gossamer/dot/network.TestBeginDiscovery_ThreeNodes()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:152 +0x1a4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62230/p2p/12D3KooWEUk1bg9TfF8EeSRV4t8r6BoBs56J565Bowg1WtWykAD1	pkg=network
2021-12-07T15:11:52-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleTransactionMessage3961094365/001/TestHandleTransactionMessage/nodeA/node.key	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:52-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:52-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62231/p2p/12D3KooWFWU7W9SDeB5jWjBh8BvxVLVhyCK4khjTYJxpaAJCeeMR	pkg=network
2021-12-07T15:11:53-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:11:53-04:00 DBUG starting DHT with bootnodes [{12D3KooWAbajoSTzWdcss4f6GGVHUjrkMMgWANN5vXgALzVcz7RV: [/ip4/127.0.0.1/tcp/62203]}]...	pkg=network
2021-12-07T15:11:53-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:11:53-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:53-04:00 DBUG DHT discovery started!	pkg=network
=== CONT  TestValidateBlockAnnounceHandshake
    testing.go:1152: race detected during execution of test
=== CONT  TestDecodeTransactionHandshake
--- FAIL: TestValidateBlockAnnounceHandshake (0.89s)
=== CONT  TestDecodeSyncMessage
--- PASS: TestDecodeTransactionHandshake (0.00s)
=== CONT  TestEncodeBlockAnnounceHandshake
--- PASS: TestDecodeSyncMessage (0.00s)
=== CONT  TestDecodeBlockAnnounceHandshake
--- PASS: TestEncodeBlockAnnounceHandshake (0.00s)
=== CONT  TestHandleConn
--- PASS: TestDecodeBlockAnnounceHandshake (0.00s)
2021-12-07T15:11:53-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:53-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleConn3505815662/001/TestHandleConn/nodeA/node.key	pkg=network
2021-12-07T15:11:53-04:00 DBUG connection successful with peer 12D3KooWGJydEQuDLDK8MagBoXmSQL2YMyNjzE1EgSbVs44a5ubB	pkg=network
=== CONT  TestHandleTransactionMessage
    testing.go:1152: race detected during execution of test
=== CONT  TestSerivceIsMajorSyncMetrics
--- FAIL: TestHandleTransactionMessage (0.78s)
=== CONT  TestPersistPeerStore
--- PASS: TestSerivceIsMajorSyncMetrics (0.00s)
2021-12-07T15:11:53-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPersistPeerStore2339604387/001/TestPersistPeerStore/node0/node.key	pkg=network
=== CONT  TestBeginDiscovery
    testing.go:1152: race detected during execution of test
=== CONT  TestDecodeTransactionMessageOneExtrinsic
--- FAIL: TestBeginDiscovery (4.07s)
--- PASS: TestDecodeTransactionMessageOneExtrinsic (0.00s)
=== CONT  TestEncodeTransactionMessageTwoExtrinsics
=== CONT  TestDecode_BlockAnnounceMessage
--- PASS: TestEncodeTransactionMessageTwoExtrinsics (0.00s)
=== CONT  TestEncodeBlockAnnounceMessage
--- PASS: TestDecode_BlockAnnounceMessage (0.00s)
=== CONT  TestService_Health
--- PASS: TestEncodeBlockAnnounceMessage (0.00s)
2021-12-07T15:11:53-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestService_Health2838981278/001/TestService_Health/nodeA/node.key	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:53-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62232/p2p/12D3KooWQTPVRi8QiGVmBWZCAMGHpoWLZAFKLtUUHTwtMbFaSGfC	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:53-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62233/p2p/12D3KooWEBDbVdZhqo3pJanjmsicofJEvk7umc9ZBCL1DVywyXtY	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:53-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:53-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62234/p2p/12D3KooWATnnEbMJr8aqL2ZNqvb6TgH67Gax1Kqf5opvDfGDAPWm	pkg=network
=== CONT  TestSetReservedPeer
    testing.go:1152: race detected during execution of test
=== CONT  TestHandleBlockAnnounceMessage
--- FAIL: TestSetReservedPeer (4.48s)
2021-12-07T15:11:53-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleBlockAnnounceMessage3577553906/001/TestHandleBlockAnnounceMessage/nodeA/node.key	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62235/p2p/12D3KooWLThAJFBaSLEGXAu8GpsSc4MPYTHQ6jXpFCt7JNNS6826	pkg=network
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestHandleConn3505815662/002/TestHandleConn/nodeB/node.key	pkg=network
=== CONT  TestStreamManager
    testing.go:1152: race detected during execution of test
=== CONT  TestDecodeBlockAnnounce
--- FAIL: TestStreamManager (1.47s)
--- PASS: TestDecodeBlockAnnounce (0.00s)
=== CONT  TestBlockRequestString
BlockRequestMessage RequestedData=1 StartingBlock={[220 209 52 103 1 202 131 150 73 110 82 170 39 133 177 116 141 235 109 176 149 81 183 33 89 220 179 224 137 145 2 91]} EndBlockHash=0x0000000000000000000000000000000000000000000000000000000000000000 Direction=1 Max=0
=== CONT  TestEncodeBlockResponseMessage_WithBody
--- PASS: TestBlockRequestString (0.00s)
=== CONT  TestEncodeTransactionMessageSingleExtrinsic
--- PASS: TestEncodeBlockResponseMessage_WithBody (0.00s)
=== CONT  TestEncodeBlockRequestMessage_NoOptionals
--- PASS: TestEncodeTransactionMessageSingleExtrinsic (0.00s)
=== CONT  TestEncodeBlockResponseMessage_Empty
--- PASS: TestEncodeBlockRequestMessage_NoOptionals (0.00s)
--- PASS: TestEncodeBlockResponseMessage_Empty (0.00s)
=== CONT  TestEncodeBlockRequestMessage
=== CONT  TestEncodeBlockRequestMessage_BlockHash
2021-12-07T15:11:54-04:00 DBUG DHT discovery started!	pkg=network
--- PASS: TestEncodeBlockRequestMessage (0.00s)
--- PASS: TestEncodeBlockRequestMessage_BlockHash (0.00s)
=== CONT  TestMessageCacheError
2021-12-07T15:11:54-04:00 DBUG advertising ourselves in the DHT...	pkg=network
=== CONT  TestEncodeBlockRequestMessage_BlockNumber
--- PASS: TestMessageCacheError (0.00s)
=== CONT  TestBroadcastDuplicateMessage
--- PASS: TestEncodeBlockRequestMessage_BlockNumber (0.00s)
2021-12-07T15:11:54-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBroadcastDuplicateMessage1281742931/001/TestBroadcastDuplicateMessage/nodeA/node.key	pkg=network
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestPersistPeerStore2339604387/002/TestPersistPeerStore/node1/node.key	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62236/p2p/12D3KooWS6LTV8bfxVimbFN8PQAGkomMiBKLS3nNUzkGEgUTwbsN	pkg=network
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62237/p2p/12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:54-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62238/p2p/12D3KooWCN8f1NFmoWfX2irm3sYsWLV7bBmkWAatA493ZJumjbpc	pkg=network
--- PASS: TestService_Health (0.96s)
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
--- PASS: TestHandleBlockAnnounceMessage (0.72s)
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
=== CONT  TestBeginDiscovery_ThreeNodes
    testing.go:1152: race detected during execution of test
--- FAIL: TestBeginDiscovery_ThreeNodes (6.25s)
2021-12-07T15:11:54-04:00 INFO Generating p2p identity with seed 0 and key file /var/folders/vj/qljhg8m12mxfl4bfs4yb_7qh0000gn/T/TestBroadcastDuplicateMessage1281742931/002/TestBroadcastDuplicateMessage/nodeB/node.key	pkg=network
2021-12-07T15:11:54-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
--- PASS: TestHandleConn (1.85s)
2021-12-07T15:11:55-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:55-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:55-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62240/p2p/12D3KooWAfxzRJ9dPfUb2oQeccrJTCYeJZdVKo4kersTowetTXz8	pkg=network
2021-12-07T15:11:55-04:00 INFO registered notifications sub-protocol /gossamer/test/0/block-announces/1	pkg=network
2021-12-07T15:11:55-04:00 INFO registered notifications sub-protocol /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:55-04:00 INFO Started listening on /ip4/127.0.0.1/tcp/62233/p2p/12D3KooWEBDbVdZhqo3pJanjmsicofJEvk7umc9ZBCL1DVywyXtY	pkg=network
2021-12-07T15:11:55-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:55-04:00 INFO started network service with supported protocols /p2p/id/delta/1.0.0, /ipfs/id/1.0.0, /ipfs/id/push/1.0.0, /ipfs/ping/1.0.0, /gossamer/test/0/sync/2, /gossamer/test/0/light/2, /gossamer/test/0/block-announces/1, /gossamer/test/0/transactions/1	pkg=network
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
--- PASS: TestPersistPeerStore (2.42s)
==================
WARNING: DATA RACE
Write at 0x00c045ab1dd8 by goroutine 87:
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastDuplicateMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:248 +0xe8b
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous read at 0x00c045ab1dd8 by goroutine 893:
  github.com/ChainSafe/gossamer/dot/network.(*Service).sendData()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:285 +0x3b2
  github.com/ChainSafe/gossamer/dot/network.(*Service).broadcastExcluding·dwrap·10()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:419 +0xb4

Goroutine 87 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 893 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.(*Service).broadcastExcluding()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:419 +0x467
  github.com/ChainSafe/gossamer/dot/network.(*Service).GossipMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:530 +0x3d9
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastDuplicateMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:241 +0xd56
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
2021-12-07T15:11:55-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:56-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:56-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:56-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
2021-12-07T15:11:56-04:00 DBUG gossiping from host 12D3KooWH43tYqwW6JczLVgX2mr7KWefSJbyb2vnXoFueV9mZw8Q message of type 3: BlockAnnounceMessage ParentHash=0x0000000000000000000000000000000000000000000000000000000000000000 Number=896 StateRoot=0x0000000000000000000000000000000000000000000000000000000000000000 ExtrinsicsRoot=0x0000000000000000000000000000000000000000000000000000000000000000 Digest={{<nil> map[2:{[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]} 4:{[0 0 0 0] []} 5:{[0 0 0 0] []} 6:{[0 0 0 0] []}]} []}	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c00bf5cd80 by goroutine 87:
  runtime.mapaccess1_faststr()
      /usr/local/go/src/runtime/map_faststr.go:12 +0x0
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastDuplicateMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:255 +0xf78
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c00bf5cd80 by goroutine 471:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x1f5
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 87 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 471 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
==================
WARNING: DATA RACE
Read at 0x00c0b0b28348 by goroutine 87:
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastDuplicateMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:255 +0xf85
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c0b0b28348 by goroutine 471:
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:137 +0x204
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleMessage-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:135 +0x6d
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).readStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:184 +0x3bc
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:132 +0xab
  github.com/ChainSafe/gossamer/dot/network.(*testStreamHandler).handleStream-fm()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/helpers_test.go:124 +0x4d
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).SetStreamHandler.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:529 +0x86
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler·dwrap·3()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x74

Goroutine 87 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 471 (running) created at:
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:372 +0x7ca
  github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).newStreamHandler-fm()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p@v0.15.1/p2p/host/basic/basic_host.go:329 +0x4d
  github.com/libp2p/go-libp2p-swarm.(*Conn).start.func1.1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-swarm@v0.5.3/swarm_conn.go:125 +0xe4
==================
2021-12-07T15:11:56-04:00 DBUG failed to read from stream using protocol /gossamer/test/0/block-announces/1: failed to read length: stream reset	pkg=network
==================
WARNING: DATA RACE
Write at 0x00c0c2ffc790 by goroutine 87:
  runtime.closechan()
      /usr/local/go/src/runtime/chan.go:355 +0x0
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).Stop()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:144 +0x7e
  github.com/ChainSafe/gossamer/dot/network.(*Service).Stop()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:456 +0x223
  github.com/ChainSafe/gossamer/dot/network.createTestService.func1()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:110 +0x4a
  testing.(*common).Cleanup.func1()
      /usr/local/go/src/testing/testing.go:912 +0x199
  testing.(*common).runCleanup()
      /usr/local/go/src/testing/testing.go:1049 +0x154
  testing.tRunner.func2()
      /usr/local/go/src/testing/testing.go:1253 +0x4f
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1265 +0x268
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous read at 0x00c0c2ffc790 by goroutine 898:
  runtime.chansend()
      /usr/local/go/src/runtime/chan.go:158 +0x0
  github.com/ChainSafe/gossamer/dot/peerset.(*Handler).ReportPeer()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/peerset/handler.go:77 +0xf0
  github.com/ChainSafe/gossamer/dot/network.(*Service).sendData()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:315 +0x957
  github.com/ChainSafe/gossamer/dot/network.(*Service).broadcastExcluding·dwrap·10()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:419 +0xb4

Goroutine 87 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 898 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.(*Service).broadcastExcluding()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/notifications.go:419 +0x467
  github.com/ChainSafe/gossamer/dot/network.(*Service).GossipMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service.go:530 +0x3d9
  github.com/ChainSafe/gossamer/dot/network.TestBroadcastDuplicateMessage()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:241 +0xd56
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
=== CONT  TestBroadcastDuplicateMessage
    testing.go:1152: race detected during execution of test
--- FAIL: TestBroadcastDuplicateMessage (2.03s)
2021-12-07T15:11:57-04:00 DBUG cleaning up outbound handshake data for protocol=/gossamer/test/0/block-announces/1, peer=12D3KooWKRyzVWW6ChFjQjK4miCty85Niy49tpPV95XdKu1BcvMA	pkg=network
2021-12-07T15:11:57-04:00 DBUG failed to send handshake to peer 12D3KooWKRyzVWW6ChFjQjK4miCty85Niy49tpPV95XdKu1BcvMA on protocol /gossamer/test/0/block-announces/1: handshake timeout reached	pkg=network
=== CONT  Test_HandshakeTimeout
    testing.go:1152: race detected during execution of test
--- FAIL: Test_HandshakeTimeout (12.62s)
2021-12-07T15:12:01-04:00 DBUG no peers yet, waiting to start DHT...	pkg=network
2021-12-07T15:12:01-04:00 DBUG starting DHT with bootnodes [{12D3KooWDVVqUwFB8kxFiXpptNadjUFKqasssD2yRWiKJ9jTdwQU: [/ip4/127.0.0.1/tcp/62226]}]...	pkg=network
2021-12-07T15:12:01-04:00 DBUG no peers yet, waiting to start DHT...	pkg=network
2021-12-07T15:12:02-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:12:02-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:12:02-04:00 WARN failed to advertise in the DHT: failed to find any peer in table	pkg=network
2021-12-07T15:12:02-04:00 DBUG no peers yet, waiting to start DHT...	pkg=network
2021-12-07T15:12:02-04:00 DBUG starting DHT with bootnodes [{12D3KooWGVUcZc5ydFFnKrJuzVMuJtC1imWaSW7cjhhLkn3gApM7: [/ip4/127.0.0.1/tcp/62218]}]...	pkg=network
2021-12-07T15:12:02-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:02-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:02-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:12:03-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:03-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:04-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:05-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:06-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
==================
WARNING: DATA RACE
Read at 0x00c070e9a410 by goroutine 37:
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x264
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Previous write at 0x00c070e9a410 by goroutine 341:
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:108 +0x6b2
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 37 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1306 +0x726
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1598 +0x99
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1596 +0x7ca
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1504 +0x9d1
  github.com/ChainSafe/gossamer/dot/network.TestMain()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/service_test.go:118 +0x33
  main.main()
      _testmain.go:205 +0x264

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c04d5e0fa0 by goroutine 183:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x111

Previous write at 0x00c04d5e0fa0 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:139 +0x93d
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1fe000 by goroutine 183:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindLocal()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:714 +0x5d
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:625 +0x1b1
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c00a1fe000 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c04d5e0fa8 by goroutine 1078:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func2()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:245 +0x115

Previous write at 0x00c04d5e0fa8 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:139 +0x93d
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 1078 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:243 +0x617
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1fe058 by goroutine 183:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x126
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c00a1fe058 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1fe930 by goroutine 183:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x146
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c00a1fe930 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c0bce62198 by goroutine 183:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:388 +0x70
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c0bce62198 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:65 +0x176
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c0bce621e0 by goroutine 183:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:394 +0xde
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c0bce621e0 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:65 +0x176
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c0bce621f8 by goroutine 183:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:399 +0x148
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c0bce621f8 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:65 +0x176
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c04a2d6f78 by goroutine 183:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:404 +0x2ab
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c04a2d6f78 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:66 +0x1c4
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1fea80 by goroutine 1078:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindLocal()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:714 +0x5d
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:625 +0x1b1
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func2()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:245 +0x144

Previous write at 0x00c00a1fea80 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:134 +0x911
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 1078 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:243 +0x617
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1fead8 by goroutine 1078:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x126
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func2()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:245 +0x144

Previous write at 0x00c00a1fead8 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:134 +0x911
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 1078 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:243 +0x617
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c00a1ff3b0 by goroutine 1078:
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x146
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func2()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:245 +0x144

Previous write at 0x00c00a1ff3b0 by goroutine 341:
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:273 +0x339
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:134 +0x911
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 1078 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:243 +0x617
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c0bce62318 by goroutine 1078:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:388 +0x70
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func2()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:245 +0x144

Previous write at 0x00c0bce62318 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:65 +0x176
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:134 +0x911
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 1078 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:243 +0x617
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c04a2d6f70 by goroutine 183:
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:404 +0x2cb
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c04a2d6f70 by goroutine 341:
  github.com/libp2p/go-libp2p-kbucket.newBucket()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/bucket.go:45 +0x12a
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:66 +0x1ad
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
==================
WARNING: DATA RACE
Read at 0x00c04447e778 by goroutine 183:
  container/list.(*List).Front()
      /usr/local/go/src/container/list/list.go:70 +0x57
  github.com/libp2p/go-libp2p-kbucket.(*peerDistanceSorter).appendPeersFromList()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/sorting.go:40 +0x69
  github.com/libp2p/go-libp2p-kbucket.(*RoutingTable).NearestPeers()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:404 +0x2e4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runQuery()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:151 +0x172
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runLookupWithFollowup()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/query.go:81 +0xc4
  github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/routing.go:629 +0x3d9
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer.func1()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:241 +0x13b

Previous write at 0x00c04447e778 by goroutine 341:
  container/list.(*List).Init()
      /usr/local/go/src/container/list/list.go:57 +0x113
  container/list.New()
      /usr/local/go/src/container/list/list.go:62 +0x96
  github.com/libp2p/go-libp2p-kbucket.newBucket()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/bucket.go:45 +0x121
  github.com/libp2p/go-libp2p-kbucket.NewRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kbucket@v0.4.7/table.go:66 +0x1ad
  github.com/libp2p/go-libp2p-kad-dht.makeRoutingTable()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:386 +0x2c5
  github.com/libp2p/go-libp2p-kad-dht.makeDHT()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:313 +0xadd
  github.com/libp2p/go-libp2p-kad-dht.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dht.go:180 +0x2b7
  github.com/libp2p/go-libp2p-kad-dht/dual.New()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:124 +0x73c
  github.com/ChainSafe/gossamer/dot/network.(*discovery).start()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery.go:103 +0x688
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery·dwrap·26()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x39

Goroutine 183 (running) created at:
  github.com/libp2p/go-libp2p-kad-dht/dual.(*DHT).FindPeer()
      /Users/eclesiojunior/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.11.1/dual/dual.go:239 +0x417
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:91 +0x292
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47

Goroutine 341 (finished) created at:
  github.com/ChainSafe/gossamer/dot/network.newTestDiscovery()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:45 +0x4d7
  github.com/ChainSafe/gossamer/dot/network.TestKadDHT()
      /Users/eclesiojunior/go/src/github.com/ChainSafe/gossamer/dot/network/discovery_test.go:80 +0xe4
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run·dwrap·21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
==================
2021-12-07T15:12:07-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:08-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:08-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:08-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:08-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:09-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:10-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG no peers yet, waiting to start DHT...	pkg=network
2021-12-07T15:12:11-04:00 DBUG starting DHT with bootnodes [{12D3KooWGVUcZc5ydFFnKrJuzVMuJtC1imWaSW7cjhhLkn3gApM7: [/ip4/127.0.0.1/tcp/62218]}]...	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:11-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:12-04:00 DBUG DHT discovery started!	pkg=network
2021-12-07T15:12:12-04:00 DBUG advertising ourselves in the DHT...	pkg=network
2021-12-07T15:12:12-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:13-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:14-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:14-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:14-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:15-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:16-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
2021-12-07T15:12:17-04:00 DBUG problem sending system.interval telemetry message: timeout sending message	pkg=network
=== CONT  TestKadDHT
    testing.go:1152: race detected during execution of test
--- FAIL: TestKadDHT (27.63s)
FAIL
FAIL	github.com/ChainSafe/gossamer/dot/network	38.942s
FAIL
